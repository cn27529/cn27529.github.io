---
title: Timers Plugin
tags:
  - jQuery
excerpt: >-
  一般的方式是使用Javascript的原生計時器函式clearInterval、clearTimeout、setInterval、setTimeout，不過原生函式在使用上不太直覺，而且無法快速的指定套用在某個特定的網頁元素，另外他的間隔單位是以毫秒去計算(1秒=1000毫秒)，嗯…我想要每5分鐘做一次，那我要設定…60*60*1000=3600000秒…對吧？還是360000秒？這時候快從哆啦B夢口袋拿出了JQuery
  Timers這個法寶就能解決這麻煩的問題。<br /><br />JQuery Timers提供了三個函式<br /><br />1.
  everyTime(時間間隔, [計時器名稱], 函式名稱, [次數限制], [等待函式程序完成])<br />2. oneTime(時間間隔,
  [計時器名稱], 呼叫的函式)<br />3. stopTime ([計時器名稱], [函式名稱])<br /><br
  />官方雖然有Demo，但是卻沒有列出使用的原始碼，即便右鍵檢視原始碼，裡面也沒有完整針對每一種情況寫出一組程式說明，所以我只好試著測試函式了。以下為測試程式報告：<br
  /><br /><br
  />/*************************************************************<br />*
  everyTime(時間間隔, [計時器名稱], 函式名稱, [次數限制], [等待函式程序完成])<br
  />*************************************************************/<br
  />//每1秒執行函式test()<br />function test(){<br />//do something...<br />}<br
  />$('body').everyTime('1s',test);<br /><br />//每1秒執行<br
  />$('body').everyTime('1s',function(){<br />//do something...<br />});<br
  /><br />//每1秒執行，並命名計時器名稱為A<br />$('body').everyTime('1s','A',function(){<br
  />//do something...<br />});<br /><br />//每20秒執行，最多5次，並命名計時器名稱為B<br
  />$('body').everyTime('2das','B',function(){<br />//do something...<br
  />},5);<br /><br />//每20秒執行，無限次，並命名計時器名稱為C<br
  />//若時間間隔抵到，但函式程序仍未完成則需等待執行函式完成後再繼續計時<br
  />$('body').everyTime('2das','C',function(){<br />//執行一個會超過20秒以上的程式<br
  />},0,true);<br /><br
  />/***********************************************************<br />*
  oneTime(時間間隔, [計時器名稱], 呼叫的函式)<br
  />***********************************************************/<br
  />//倒數10秒後執行<br />$('body').oneTime('1das',function(){<br />//do
  something...<br />});<br /><br />//倒數100秒後執行，並命名計時器名稱為D<br
  />$('body').oneTime('1hs','D',function(){<br />//do something...<br />});<br
  /><br />/************************************************************<br />*
  stopTime ([計時器名稱], [函式名稱])<br
  />************************************************************/<br
  />//停止所有的在$('body')上計時器<br />$('body').stopTime ();<br /><br
  />//停止$('body')上名稱為A的計時器<br />$('body').stopTime ('A');<br /><br
  />//停止$('body')上所有呼叫test()的計時器<br />$('body').stopTime (test);<br /><br
  />如果你試著打開他的原始碼，你可以發現下列這段程式碼，正是時間間隔的字串縮寫，所以我們也可以自訂自己所需要的縮寫字串，像是分，時之類的<br /><br
  />// Yeah this is major overkill...<br />'ms': 1,<br />'cs': 10,<br />'ds':
  100,<br />'s': 1000,<br />'das': 10000,<br />'hs': 100000,<br />'ks':
  1000000,<br />//自訂單位<br />'m': 60000,<br />'h': 360000<br /><br /><br
  />另外該作者也在網頁的開頭說明，他將程式碼移至jQuery區來做統一發佈管理，所以如果要下載該作者較新版的程式碼，請到http://plugins.jquery.com/project/timers
  這邊下載，目前我所見到的是1.1.2版。<br /><br />引用自 : <a
  href="http://doublekai.org/blog/?p=774"
  target="_blank">http://doublekai.org/blog/?p=774</a><div
  class="blogger-post-footer">Copyright © Bruce Huang All rights reserved.</div>
date: 2009-05-19 23:56:00
---

一般的方式是使用Javascript的原生計時器函式clearInterval、clearTimeout、setInterval、setTimeout，不過原生函式在使用上不太直覺，而且無法快速的指定套用在某個特定的網頁元素，另外他的間隔單位是以毫秒去計算(1秒=1000毫秒)，嗯…我想要每5分鐘做一次，那我要設定…60\*60\*1000=3600000秒…對吧？還是360000秒？這時候快從哆啦B夢口袋拿出了JQuery Timers這個法寶就能解決這麻煩的問題。  
  
JQuery Timers提供了三個函式  
  
1\. everyTime(時間間隔, \[計時器名稱\], 函式名稱, \[次數限制\], \[等待函式程序完成\])  
2\. oneTime(時間間隔, \[計時器名稱\], 呼叫的函式)  
3\. stopTime (\[計時器名稱\], \[函式名稱\])  
  
官方雖然有Demo，但是卻沒有列出使用的原始碼，即便右鍵檢視原始碼，裡面也沒有完整針對每一種情況寫出一組程式說明，所以我只好試著測試函式了。以下為測試程式報告：  
  
  
/\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*  
\* everyTime(時間間隔, \[計時器名稱\], 函式名稱, \[次數限制\], \[等待函式程序完成\])  
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/  
//每1秒執行函式test()  
function test(){  
//do something...  
}  
$('body').everyTime('1s',test);  
  
//每1秒執行  
$('body').everyTime('1s',function(){  
//do something...  
});  
  
//每1秒執行，並命名計時器名稱為A  
$('body').everyTime('1s','A',function(){  
//do something...  
});  
  
//每20秒執行，最多5次，並命名計時器名稱為B  
$('body').everyTime('2das','B',function(){  
//do something...  
},5);  
  
//每20秒執行，無限次，並命名計時器名稱為C  
//若時間間隔抵到，但函式程序仍未完成則需等待執行函式完成後再繼續計時  
$('body').everyTime('2das','C',function(){  
//執行一個會超過20秒以上的程式  
},0,true);  
  
/\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*  
\* oneTime(時間間隔, \[計時器名稱\], 呼叫的函式)  
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/  
//倒數10秒後執行  
$('body').oneTime('1das',function(){  
//do something...  
});  
  
//倒數100秒後執行，並命名計時器名稱為D  
$('body').oneTime('1hs','D',function(){  
//do something...  
});  
  
/\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*  
\* stopTime (\[計時器名稱\], \[函式名稱\])  
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/  
//停止所有的在$('body')上計時器  
$('body').stopTime ();  
  
//停止$('body')上名稱為A的計時器  
$('body').stopTime ('A');  
  
//停止$('body')上所有呼叫test()的計時器  
$('body').stopTime (test);  
  
如果你試著打開他的原始碼，你可以發現下列這段程式碼，正是時間間隔的字串縮寫，所以我們也可以自訂自己所需要的縮寫字串，像是分，時之類的  
  
// Yeah this is major overkill...  
'ms': 1,  
'cs': 10,  
'ds': 100,  
's': 1000,  
'das': 10000,  
'hs': 100000,  
'ks': 1000000,  
//自訂單位  
'm': 60000,  
'h': 360000  
  
  
另外該作者也在網頁的開頭說明，他將程式碼移至jQuery區來做統一發佈管理，所以如果要下載該作者較新版的程式碼，請到http://plugins.jquery.com/project/timers 這邊下載，目前我所見到的是1.1.2版。  
  
引用自 : [http://doublekai.org/blog/?p=774](http://doublekai.org/blog/?p=774)

Copyright © Bruce Huang All rights reserved.
<!-- more -->
